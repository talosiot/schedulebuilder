---

title: Scheduling


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/init.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/init.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">yaml</span>
<span class="n">pdt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#128338;-Period">&#128338; Period<a class="anchor-link" href="#&#128338;-Period"> </a></h2><p>A period is a uninterupted stretch of time that is all the same status.<br>
E.g. <code>{'start': "9:00", 'end': "15:00", 'status': 'occupied'}</code> means the building is occupied from 9am-5pm.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Period" class="doc_header"><code>class</code> <code>Period</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L23" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Period</code>(<strong><code>start</code></strong>:<code>time</code>, <strong><code>end</code></strong>:<code>time</code>, <strong><code>status</code></strong>:<code>str</code>=<em><code>'occupied'</code></em>) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_opening</span><span class="p">():</span>
    <span class="n">per</span> <span class="o">=</span> <span class="n">Period</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="s2">&quot;6:00&quot;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="s2">&quot;18:00&quot;</span><span class="p">})</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">per</span><span class="o">.</span><span class="n">during</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 6:01&#39;</span><span class="p">)</span>  <span class="p">))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">per</span><span class="o">.</span><span class="n">during</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 20:00&#39;</span><span class="p">)</span>  <span class="p">))</span>  

    <span class="n">alwayson</span> <span class="o">=</span> <span class="n">Period</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;0:00&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;0:00&quot;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="s1">&#39;some other status&#39;</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">alwayson</span><span class="o">.</span><span class="n">during</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 00:00&#39;</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;✅ Passing&#39;</span><span class="p">)</span>
    
    
<span class="n">test_opening</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>✅ Passing
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#9728;&#65039;-Day-&#127767;">&#9728;&#65039; Day &#127767;<a class="anchor-link" href="#&#9728;&#65039;-Day-&#127767;"> </a></h2><p>A day is made up of zero or more periods.  These periods can have different statuses if you want.  You can then ask the day whether a certain time of day falls within any period of a given status.</p>
<blockquote><p>e.g. is 10:32 during occupied hours?</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Day" class="doc_header"><code>class</code> <code>Day</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L45" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Day</code>(<strong><code>periods</code></strong>:<code>List</code>[<a href="/schedulebuilder/init.html#Period"><code>Period</code></a>]=<em><code>[]</code></em>, <strong><code>name</code></strong>:<code>str</code>=<em><code>None</code></em>) :: <code>BaseModel</code></p>
</blockquote>
<p>A type of day that contains the periods listed
If a single period is given, that is the only period for the dat</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">day_config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    periods:</span>
<span class="s1">        - start: &#39;9:00&#39;</span>
<span class="s1">          end: &#39;17:00&#39;</span>
<span class="s1">          status: occupied</span>
<span class="s1">    name: workday</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>

<span class="n">closed_for_lunch</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    periods:</span>
<span class="s1">        - start: &#39;9:00&#39;</span>
<span class="s1">          end: &#39;12:00&#39;</span>
<span class="s1">          status: occupied</span>
<span class="s1">        - start: &#39;13:00&#39;</span>
<span class="s1">          end: &#39;20:00&#39;</span>
<span class="s1">          status: occupied</span>
<span class="s1">    name: split_workday</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_day</span><span class="p">():</span>
    <span class="n">day</span> <span class="o">=</span> <span class="n">Day</span><span class="p">(</span><span class="o">**</span><span class="n">day_config</span><span class="p">)</span>
    <span class="c1">#too early</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">day</span><span class="o">.</span><span class="n">within_period</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 8:00&#39;</span><span class="p">)))</span>
    <span class="c1">#1 min into the workday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">day</span><span class="o">.</span><span class="n">within_period</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 9:01&#39;</span><span class="p">)))</span>
    <span class="c1">#status of the period does not match the passed in status</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">day</span><span class="o">.</span><span class="n">within_period</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 9:01&#39;</span><span class="p">),</span> <span class="n">status</span><span class="o">=</span><span class="s1">&#39;otherstatus&#39;</span><span class="p">))</span> 
    
    <span class="n">cfl</span> <span class="o">=</span> <span class="n">Day</span><span class="p">(</span><span class="o">**</span><span class="n">closed_for_lunch</span><span class="p">)</span>
    <span class="c1">#too early</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">cfl</span><span class="o">.</span><span class="n">within_period</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 8:00&#39;</span><span class="p">)))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">cfl</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 8:00&#39;</span><span class="p">)))</span>
    
    <span class="c1">#1 min into the workday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">cfl</span><span class="o">.</span><span class="n">within_period</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 9:01&#39;</span><span class="p">)))</span>
    <span class="c1">#lunch</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">cfl</span><span class="o">.</span><span class="n">within_period</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 12:01&#39;</span><span class="p">)))</span>
    <span class="c1">#1 min into the workday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">cfl</span><span class="o">.</span><span class="n">within_period</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 19:59&#39;</span><span class="p">)))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cfl</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 19:59&#39;</span><span class="p">)),</span> <span class="s1">&#39;occupied&#39;</span><span class="p">)</span>
    
    <span class="n">two_status_day</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        periods:</span>
<span class="s1">            - start: &#39;9:00&#39;</span>
<span class="s1">              end: &#39;17:00&#39;</span>
<span class="s1">              status: occupied</span>
<span class="s1">            - start: &#39;17:00&#39;</span>
<span class="s1">              end: &#39;19:00&#39;</span>
<span class="s1">              status: cleaning</span>
<span class="s1">        name: workday</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>   
    <span class="n">daystats</span> <span class="o">=</span> <span class="n">Day</span><span class="p">(</span><span class="o">**</span><span class="n">two_status_day</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">daystats</span><span class="o">.</span><span class="n">get_all_status</span><span class="p">()),</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;occupied&#39;</span><span class="p">,</span> <span class="s1">&#39;cleaning&#39;</span><span class="p">]))</span>    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;✅ Passing&#39;</span><span class="p">)</span>    
    
<span class="n">test_day</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>✅ Passing
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#129300;-Logic">&#129300; Logic<a class="anchor-link" href="#&#129300;-Logic"> </a></h2><p>After defining different types of days (e.g. workdays, offdays, etc) we need logic to see whether a certain date corresponds to that type of day.</p>
<p>Logic functions must accept a <code>pd.Timestamp</code> object <code>ts</code> as the first argument.  Other optional keywords can be given.  These will be fed in from the <code>kwargs</code> in the config for the <a href="/schedulebuilder/init.html#Logic"><code>Logic</code></a> object defined below.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="always" class="doc_header"><code>always</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L80" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>always</code>(<strong><code>ts</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_weekend" class="doc_header"><code>is_weekend</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L83" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_weekend</code>(<strong><code>ts</code></strong>)</p>
</blockquote>
<p>Returns True if the given ts is Saturday or Sunday
Pandas defines the day of the week with Monday=0, Sunday=6.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_weekday" class="doc_header"><code>is_weekday</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L91" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_weekday</code>(<strong><code>ts</code></strong>)</p>
</blockquote>
<p>Returns True if the given ts is a weekday (Monday-Friday)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_named_weekday" class="doc_header"><code>get_named_weekday</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L99" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_named_weekday</code>(<strong><code>dayname</code></strong>)</p>
</blockquote>
<p>Returns the number day of the week given the name</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="specific_weekday" class="doc_header"><code>specific_weekday</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>specific_weekday</code>(<strong><code>ts</code></strong>, <strong><code>dayname</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Returns True if the ts is that specific day of the week.
e.g.
specific_weekday(pdt('2021-07-05'), 'Monday') --&gt; True</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="year_of" class="doc_header"><code>year_of</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L121" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>year_of</code>(<strong><code>ts</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_holiday" class="doc_header"><code>is_holiday</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L125" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_holiday</code>(<strong><code>ts</code></strong>, <strong><code>holiday_calendar</code></strong>=<em><code>'US'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_month" class="doc_header"><code>is_month</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L130" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_month</code>(<strong><code>ts</code></strong>, <strong><code>months</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_year_specific_date" class="doc_header"><code>make_year_specific_date</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L133" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_year_specific_date</code>(<strong><code>year</code></strong>, <strong><code>month</code></strong>=<em><code>None</code></em>, <strong><code>day</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="before" class="doc_header"><code>before</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L137" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>before</code>(<strong><code>ts</code></strong>, <strong><code>month</code></strong>:<code>int</code>, <strong><code>day</code></strong>:<code>int</code>)</p>
</blockquote>
<p>Teturns True if the ts is earlier in the year than date.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="after" class="doc_header"><code>after</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L143" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>after</code>(<strong><code>ts</code></strong>, <strong><code>month</code></strong>, <strong><code>day</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_logic_functions</span><span class="p">():</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">is_month</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-11-01&#39;</span><span class="p">),</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]))</span>
    <span class="c1">#because july 4th 2021 was a sunday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">is_weekend</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-04&#39;</span><span class="p">)))</span>
    <span class="c1">#july 5th was a holiday in the US on 2021, because july 4th was a sunday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">is_holiday</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-05&#39;</span><span class="p">)))</span>
    <span class="n">feb1</span> <span class="o">=</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-02-01&#39;</span><span class="p">)</span>

    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">before</span><span class="p">(</span><span class="n">feb1</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">after</span><span class="p">(</span><span class="n">feb1</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">before</span><span class="p">(</span><span class="n">feb1</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">31</span><span class="p">))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">after</span><span class="p">(</span><span class="n">feb1</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">31</span><span class="p">))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">specific_weekday</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-05&#39;</span><span class="p">),</span> <span class="s1">&#39;Monday&#39;</span><span class="p">))</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;✅ Passing&#39;</span><span class="p">)</span>
    
<span class="n">test_logic_functions</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>✅ Passing
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_known_name" class="doc_header"><code>is_known_name</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L162" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_known_name</code>(<strong><code>logic_string</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Logic" class="doc_header"><code>class</code> <code>Logic</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L167" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Logic</code>(<strong><code>select</code></strong>:<code>str</code>, <strong><code>exclude</code></strong>:<code>bool</code>=<em><code>None</code></em>, <strong><code>kwargs</code></strong>:<code>dict</code>=<em><code>{}</code></em>) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_logic</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
        <span class="n">log</span> <span class="o">=</span> <span class="n">Logic</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="s1">&#39;doesnotexist&#39;</span><span class="p">)</span>

    <span class="c1">#always will give you true for any value</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">Logic</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="s1">&#39;always&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

    <span class="n">halloween</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    select: months</span>
<span class="s1">    kwargs:</span>
<span class="s1">        months: </span>
<span class="s1">            - 10</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">Logic</span><span class="p">(</span><span class="o">**</span><span class="n">halloween</span><span class="p">)</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-10-31&#39;</span><span class="p">)))</span>
    
    <span class="n">closed_on_holidays</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    select: holidays</span>
<span class="s1">    exclude: true</span>
<span class="s1">    kwargs:</span>
<span class="s1">        holiday_calendar: US</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">Logic</span><span class="p">(</span><span class="o">**</span><span class="n">closed_on_holidays</span><span class="p">)</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-12-25&#39;</span><span class="p">)))</span>
    
<span class="n">test_logic</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Day-Types">Day Types<a class="anchor-link" href="#Day-Types"> </a></h2><p>Attach the built-in logic to a day</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DayType" class="doc_header"><code>class</code> <code>DayType</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L190" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DayType</code>(<strong><code>name</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>logic</code></strong>:<code>List</code>[<a href="/schedulebuilder/init.html#Logic"><code>Logic</code></a>]=<em><code>[]</code></em>, <strong><code>day</code></strong>:<a href="/schedulebuilder/init.html#Day"><code>Day</code></a>) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_daytype</span><span class="p">():</span>
    <span class="n">workday</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    name: workday-type</span>
<span class="s1">    day:</span>
<span class="s1">        periods:</span>
<span class="s1">            - start: &#39;9:00&#39;</span>
<span class="s1">              end: &#39;17:00&#39;</span>
<span class="s1">              status: occupied</span>
<span class="s1">        name: workday</span>
<span class="s1">    logic: </span>
<span class="s1">        - select: weekday</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>    
    <span class="n">dt</span> <span class="o">=</span> <span class="n">DayType</span><span class="p">(</span><span class="o">**</span><span class="n">workday</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-07&#39;</span><span class="p">)),</span> <span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-10&#39;</span><span class="p">)))</span>
<span class="n">test_daytype</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>   
<span class="k">def</span> <span class="nf">test_logics</span><span class="p">():</span>
    <span class="n">october_weekdays</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    day: </span><span class="si">{}</span><span class="s1"></span>
<span class="s1">    logic:</span>
<span class="s1">        - select: months</span>
<span class="s1">          kwargs:</span>
<span class="s1">            months:</span>
<span class="s1">                - 10</span>
<span class="s1">        - select: weekday</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">octs</span> <span class="o">=</span> <span class="n">DayType</span><span class="p">(</span><span class="o">**</span><span class="n">october_weekdays</span><span class="p">)</span>
    
    <span class="c1">#true for october weekday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">octs</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-10-30&#39;</span><span class="p">)))</span>
    <span class="c1">#halloween was a saturday        </span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">octs</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-10-31&#39;</span><span class="p">)))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">octs</span><span class="o">.</span><span class="n">evaluate_logic</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-10-31&#39;</span><span class="p">)))</span>    
    <span class="c1">#false for any day in november</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">octs</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-11-10&#39;</span><span class="p">)))</span>    

    <span class="c1"># order doesnt matter since the logic is AND</span>
    <span class="n">october_weekdays_reversed</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    day: </span><span class="si">{}</span><span class="s1"></span>
<span class="s1">    logic:</span>
<span class="s1">        - select: weekday    </span>
<span class="s1">        - select: months</span>
<span class="s1">          kwargs:</span>
<span class="s1">            months:</span>
<span class="s1">                - 10</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">octs_rev</span> <span class="o">=</span> <span class="n">DayType</span><span class="p">(</span><span class="o">**</span><span class="n">october_weekdays_reversed</span><span class="p">)</span>
    <span class="c1">#true for october weekday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">octs_rev</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-10-30&#39;</span><span class="p">)))</span>
    <span class="c1">#halloween was a saturday        </span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">octs_rev</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-10-31&#39;</span><span class="p">)))</span>    
    <span class="c1">#false for any day in november</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">octs_rev</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2020-11-10&#39;</span><span class="p">)))</span>
    
    <span class="n">weekdays_no_holidays</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    day: </span><span class="si">{}</span><span class="s1"></span>
<span class="s1">    logic:</span>
<span class="s1">        - select: weekdays   </span>
<span class="s1">        - select: holidays</span>
<span class="s1">          exclude: true</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="c1">#july 5th 2021 was a monday observation of independence day</span>
    <span class="n">wnh</span> <span class="o">=</span> <span class="n">DayType</span><span class="p">(</span><span class="o">**</span><span class="n">weekdays_no_holidays</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">wnh</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-05&#39;</span><span class="p">)))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">wnh</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-06&#39;</span><span class="p">)))</span>
    
    <span class="c1">#empty lists always evaluate to false</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">DayType</span><span class="p">(</span><span class="n">day</span><span class="o">=</span><span class="p">{},</span> <span class="n">funcs</span><span class="o">=</span><span class="p">[])</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;✅ Passing&#39;</span><span class="p">)</span>
    
    
<span class="n">test_logics</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>✅ Passing
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#128197;-Schedule">&#128197; Schedule<a class="anchor-link" href="#&#128197;-Schedule"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="IncompleteSchedule" class="doc_header"><code>class</code> <code>IncompleteSchedule</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L219" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>IncompleteSchedule</code>() :: <code>Exception</code></p>
</blockquote>
<p>Common base class for all non-exit exceptions.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Schedule" class="doc_header"><code>class</code> <code>Schedule</code><a href="https://github.com/talosiot-will/schedulebuilder/tree/master/schedulebuilder/__init__.py#L222" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Schedule</code>(<strong><code>daytypes</code></strong>:<code>List</code>[<a href="/schedulebuilder/init.html#DayType"><code>DayType</code></a>]=<em><code>[]</code></em>) :: <code>BaseModel</code></p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_schedule</span><span class="p">():</span>
    <span class="n">worksched</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">daytypes: </span>
<span class="s1">      - name: workday-type</span>
<span class="s1">        day:</span>
<span class="s1">            periods:</span>
<span class="s1">                - start: &#39;6:30&#39;</span>
<span class="s1">                  end: &#39;18:30&#39;</span>
<span class="s1">                  status: occupied</span>
<span class="s1">            name: workday</span>
<span class="s1">        logic:</span>
<span class="s1">            - select: weekdays</span>
<span class="s1">            - select: holidays</span>
<span class="s1">              exclude: true</span>
<span class="s1">            - select: months</span>
<span class="s1">              exclude: true</span>
<span class="s1">              kwargs:</span>
<span class="s1">                  months: </span>
<span class="s1">                      - 1</span>
<span class="s1">      - name: half-day-janurary</span>
<span class="s1">        day: </span>
<span class="s1">            periods:</span>
<span class="s1">                - start: &#39;6:30&#39;</span>
<span class="s1">                  end: &#39;12:00&#39;</span>
<span class="s1">                  status: &#39;occupied&#39;</span>
<span class="s1">            name: halfday</span>
<span class="s1">        logic: </span>
<span class="s1">            - select: weekdays</span>
<span class="s1">            - select: months</span>
<span class="s1">              kwargs:</span>
<span class="s1">                  months:</span>
<span class="s1">                      - 1</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">sched</span> <span class="o">=</span> <span class="n">Schedule</span><span class="p">(</span><span class="o">**</span><span class="n">worksched</span><span class="p">)</span>    
    <span class="n">jul6</span> <span class="o">=</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-06 01:00&#39;</span><span class="p">)</span>
    <span class="c1">#jul 6 picks up the workday-type of day</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">find_relevant_day</span><span class="p">(</span><span class="n">jul6</span><span class="p">),</span> <span class="n">sched</span><span class="o">.</span><span class="n">daytypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="c1">#but it evaluates to unoccupied at 1am</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">is_occupied</span><span class="p">(</span><span class="n">jul6</span><span class="p">))</span>
    <span class="n">jul6noon</span> <span class="o">=</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-06 12:00&#39;</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">find_relevant_day</span><span class="p">(</span><span class="n">jul6noon</span><span class="p">),</span> <span class="n">sched</span><span class="o">.</span><span class="n">daytypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="c1">#however it is occupied at noon</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">is_occupied</span><span class="p">(</span><span class="n">jul6noon</span><span class="p">))</span>
    
    <span class="c1">#they work a half day all weekdays in jan.</span>
    <span class="n">jan1</span> <span class="o">=</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-01 08:00&#39;</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertIs</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">find_relevant_day</span><span class="p">(</span><span class="n">jan1</span><span class="p">),</span> <span class="n">sched</span><span class="o">.</span><span class="n">daytypes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">is_occupied</span><span class="p">(</span><span class="n">jan1</span><span class="p">))</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">jan1</span><span class="p">),</span> <span class="s1">&#39;occupied&#39;</span><span class="p">)</span>
    
    <span class="c1">#but jan2 is a saturday</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">is_occupied</span><span class="p">(</span><span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-01-02 08:00&#39;</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;✅ Passing&#39;</span><span class="p">)</span>
    
<span class="n">test_schedule</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>✅ Passing
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test_multistatus_schedule</span><span class="p">():</span>
    <span class="n">worksched</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">daytypes: </span>
<span class="s1">      - name: workday-type</span>
<span class="s1">        day:</span>
<span class="s1">            periods:</span>
<span class="s1">                - start: &#39;6:30&#39;</span>
<span class="s1">                  end: &#39;18:30&#39;</span>
<span class="s1">                  status: occupied</span>
<span class="s1">            name: workday</span>
<span class="s1">        logic:</span>
<span class="s1">            - select: weekdays</span>
<span class="s1">            - select: holidays</span>
<span class="s1">              exclude: true</span>
<span class="s1">            - select: months</span>
<span class="s1">              exclude: true            </span>
<span class="s1">              kwargs:</span>
<span class="s1">                  months: </span>
<span class="s1">                      - 1</span>
<span class="s1">      - name: half-day-janurary</span>
<span class="s1">        day: </span>
<span class="s1">            periods:</span>
<span class="s1">                - start: &#39;6:30&#39;</span>
<span class="s1">                  end: &#39;12:00&#39;</span>
<span class="s1">                  status: &#39;lightly occupied&#39;</span>
<span class="s1">            name: halfday</span>
<span class="s1">        logic: </span>
<span class="s1">            - select: weekdays</span>
<span class="s1">            - select: months</span>
<span class="s1">              kwargs:</span>
<span class="s1">                  months:</span>
<span class="s1">                      - 1</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">sched</span> <span class="o">=</span> <span class="n">Schedule</span><span class="p">(</span><span class="o">**</span><span class="n">worksched</span><span class="p">)</span>
    <span class="n">jul6</span> <span class="o">=</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-06 01:00&#39;</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertDictEqual</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">check_all_status</span><span class="p">(</span><span class="n">jul6</span><span class="p">),</span>
                             <span class="p">{</span><span class="s1">&#39;occupied&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;lightly occupied&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
                            <span class="p">)</span>
    <span class="n">jul6noon</span> <span class="o">=</span> <span class="n">pdt</span><span class="p">(</span><span class="s1">&#39;2021-07-06 12:00&#39;</span><span class="p">)</span>
    <span class="n">TESTCASE</span><span class="o">.</span><span class="n">assertDictEqual</span><span class="p">(</span><span class="n">sched</span><span class="o">.</span><span class="n">check_all_status</span><span class="p">(</span><span class="n">jul6noon</span><span class="p">),</span>
                            <span class="p">{</span><span class="s1">&#39;occupied&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;lightly occupied&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;✅ Passing&#39;</span><span class="p">)</span>
<span class="n">test_multistatus_schedule</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>✅ Passing
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="n">notebook2script</span>
<span class="n">_nbpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_dh</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">_FNAME</span><span class="o">+</span><span class="s1">&#39;.ipynb&#39;</span><span class="p">)</span>
<span class="n">notebook2script</span><span class="p">(</span><span class="n">_nbpath</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted init.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

